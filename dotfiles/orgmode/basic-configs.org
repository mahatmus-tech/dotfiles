#+TITLE: Installing Linux Packages
#+PROPERTY: header-args:sh :shebang #!/usr/bin/env zsh :results output replace
* Contents :toc:
- [[#jakoolit][JaKoolit]]
- [[#monitors][Monitors]]
- [[#emacs][Emacs]]
  - [[#startup][startup]]
- [[#gaming-configs][Gaming Configs]]
  - [[#nvidia][Nvidia]]
  - [[#gamemode][gamemode]]
  - [[#gamescope][Gamescope]]
  - [[#wayland][Wayland]]
  - [[#monitor-benq-tweak1350][Monitor BENQ Tweak1350]]
- [[#apps][Apps]]
  - [[#brave][Brave]]
  - [[#freedrpp][FreeDRPp]]
  - [[#camera-sara][Camera Sara]]

* JaKoolit
terminal execution:
#+begin_src conf
#  sh <(curl -L https://raw.githubusercontent.com/JaKooLit/Arch-Hyprland/main/auto-install.sh)
#+end_src

* Hyprland
terminal execution:
#+begin_src conf

# Window rules for gamming
# BLUR & FULLSCREEN
windowrulev2 = nodim, tag:games*
windowrulev2 = noblur, tag:games*
windowrulev2 = noanim, tag:games*
windowrulev2 = noborder, tag:games*
windowrulev2 = noshadow, tag:games*
windowrulev2 = norounding, tag:games*
windowrulev2 = content game, tag:games*
windowrulev2 = immediate, tag:games*
windowrulev2 = fullscreen, tag:games*
windowrulev2 = monitor DP-3, tag:games*
windowrulev2 = allowsinput, tag:games*
windowrulev2 = stayfocused, tag:games*

# Remote Senior
windowrulev2 = maximize, class:^(wl-freerdp)$
windowrulev2 = idleinhibit always, class:^(wl-freerdp)$
#windowrulev2 = maximize, class:^(sdl-freerdp)$
#windowrulev2 = idleinhibit always, class:^(sdl-freerdp)$
windowrulev2 = idleinhibit always, class:^(teams-for-linux)$

# User envrioments
bind = $mainMod SHIFT, R, exec, ~/Documents/scripts/remote-senior.sh
bind = $mainMod SHIFT, C, exec, ~/Documents/scripts/camera-sara.sh

# User Settings
input.accel_profile = flat
input.sensitivity = 0
opengl {
  nvidia_anti_flicker = true
}
render {
  explicit_sync = 2
  explicit_sync_kms = 2
  direct_scanout = 2
}

cursor {
  no_hardware_cursors =  0 # change to 1 if want to disable
  use_cpu_buffer = 2
  default_monitor = DP-3
}

#+end_src

* Monitors
*** 2 Monitors ON - TV OFF
create file: /home/mahatmus/.config/hypr/Monitor_Profiles/120hz.conf
#+begin_src conf

  # Generated by nwg-displays on 2025-03-24 at 12:02:36. Do not edit manually.
  
  # Não está na wiki, mas para ser o monitor primário ele deve ter a posição 0x0
  # também deixar o monitor primário acima do secundário

  monitor=HDMI-A-1,0x0@60.0,-1x-1,1.0
  monitor=HDMI-A-1,disable
  monitor=DP-3,modeline 336.96 1920 1968 2000 2080 1080 1083 1088 1350 +hsync -vsync, 0x0, 1.0, bitdepth, 8, cm, srgb
  monitor=DP-1,2560x1080@60.0, -2560x0, 1.0
#+end_src

* Emacs
** startup
edit file: /home/mahatmus/.config/hypr/UserConfigs/Startup_Apps.conf
#+begin_src conf
  #Set emacs server to startup with hyprland.
  exec-once = emacs --daemon &
#+end_src

* Gaming Configs
** Nvidia
*** Environment Variables
edit file: /home/mahatmus/.config/hypr/UserConfigs/ENVariables.conf
#+begin_src conf
  # set ambient variable
  file: hyprland.conf
  env = LIBVA_DRIVER_NAME,nvidia
  env = __GLX_VENDOR_LIBRARY_NAME,nvidia
  env = NVD_BACKEND,direct
  env = GBM_BACKEND,nvidia-drm
  env = WLR_RENDERER_ALLOW_SOFTWARE,1
  
  env = WLR_DRM_DEVICES,/dev/dri/card1  
  #env = __GL_THREADED_OPTIMIZATIONS,1 #  (esta causando BUG, deixa desabilitado!)
#+end_src

*** Enable nvidia driver modules
edit file: /etc/mkinitcpio.conf
#+begin_src conf
  MODULES=(btrfs nvidia nvidia_modeset nvidia_uvm nvidia_drm)
#+end_src

*** Set the nvidia.conf
create file: /etc/modprobe.d/nvidia.conf
#+begin_src conf
  options nvidia_drm modeset=1 fbdev=1
  options nvidia NVreg_RegistryDwords="PowerMizerEnable=0x1; PerfLevelSrc=0x2222; PowerMizerLevel=0x3; PowerMizerDefault=0x3; PowerMizerDefaultAC=0x3"  
#+end_src

*** Rebuild Initframs
terminal execution:
#+begin_src conf
  sudo mkinitcpio -P
#+end_src

** gamemode
*** 1. Set gamemode server to startup with hyprland
edit file: /home/mahatmus/.config/hypr/UserConfigs/Startup_Apps.conf
#+begin_src conf
  exec-once = systemctl --user start gamemoded.service
#+end_src
  
*** 2. Add Your User to the =gamemode= Group
terminal execution:
#+BEGIN_SRC conf
  sudo usermod -aG gamemode $USER
#+END_SRC

*** 3. Verify the User is in the Group
terminal execution:
#+BEGIN_SRC conf
  groups $USER
#+END_SRC
- Check if =gamemode= appears in the output.

*** 4. Configure GameMode
create/edit file: /etc/gamemode.ini 
#+begin_src ini
[general]
; Enable gamemode for all games by default
defaultgamemode=1
; Enable verbose logging for troubleshooting
verbose=1

[cpu]
governor=performance
core_usage=90
; Enable Ryzen-specific optimizations
enable_amd_pstate=1
amd_prefcore=1

[gpu]
gpu_optimisations=1
nv_powermizer_mode=1
; Wayland/Vulkan focus
nv_threaded_optimizations=1
nv_opengl_threaded_optimizations=1

[memory]
realtime_priority=80
vm_watermark_scale=1
vm_stat_interval=10
; improve memory allocation behavior for some games.  
malloc_madvise=1

[supervisor]
; Wayland/Vulkan focus
ioprio=0
renice=-15

[custom]
; Nvidia-specific environment variables
env_0=__GL_MaxFramesAllowed=1
env_1=__GL_SYNC_TO_VBLANK=0
env_2=WLR_NO_HARDWARE_CURSORS=1
env_3=DXVK_ASYNC=1
env_4=DXVK_STATE_CACHE=1
env_5=VKD3D_CONFIG=dxr,gpu_feedback


[script]
start=notify-send "GameMode Started" "Performance mode activated"
end=notify-send "GameMode Ended" "Returning to normal mode"

#+end_src

*** 5. Execute Steam Games with GameMode
steam launcher parameter:
#+begin_src conf
  gamemoderun %command%
#+end_src

** Gamescope
#+begin_src conf
  # aplicar no launcher da Steam
  gamemoderun gamescope -w 1920 -h 1080 -r 120 -f -e --force-grab-cursor --rt -- %command%
#+end_src

** Wayland
#+begin_src conf
  # Wayland Support
  Force apps to launch in native Wayland mode:
  --enable-features=UseOzonePlatform --ozone-platform=wayland
#+end_src

** Monitor BENQ Tweak1350
terminal execution:
#+begin_src conf
  #app https://github.com/fhunleth/blstrobe
  #Test using https://www.testufo.com/crosstalk
     sudo modprobe i2c-dev
     sudo blstrobe -e -f -p 0 -o /dev/i2c-4 -t 3400
     sudo blstrobe -e -f -p 0 -o /dev/i2c-4 -t 5000 #brilho maximo
#+end_src

* Apps
** Brave
brave settings:
#+begin_src conf
  search for brave://flags
  change Preferred Ozone platform to Wayland
#+end_src

** FreeDRPp
terminal execution:
#+begin_src conf
  # rdesktop options:
  # -g resolução, -M use local mouse cursor, -E -E: disable encryption from client to server
  # -z: enable rdp compression, -x: RDP5 experience (l[lan]) -d: domain
  # 
  nohup rdesktop -g 1920x1080 -M -E -z -x l -d SENIOR -u ara.pasta -p Mahatma2002 192.168.1.22 &

  # flatpak
  nohup flatpak run com.freerdp.FreeRDP /u:ara.pasta /p:Mahatma2002 /d:SENIOR /size:1920x1080 +compression +mouse-motion +clipboard /network:lan /dynamic-resolution /v:192.168.1.22 &
#+end_src

** Camera Sara
#+begin_src conf
  nohup ffplay rtsp://aranpasta:P9FMPYFkjElmr9SSa8tI@192.168.1.8/stream2 &
#+end_src
